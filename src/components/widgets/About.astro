---
import { getEntry } from 'astro:content'
import { render } from 'astro:content'

const aboutEntry = await getEntry('about', 'about')
// Check if there is actual content (excluding comments)
const hasContent = aboutEntry?.body ? aboutEntry.body.replace(/<!--[\s\S]*?-->/g, '').trim().length > 0 : false
const { Content } = hasContent && aboutEntry ? await render(aboutEntry) : { Content: null }
---

{
  hasContent && Content && (
    <div class="about prose">
      <Content />
    </div>
  )
}

<style>
  .about:not(:empty) {
    margin-bottom: 1.25rem;
  }

  /* Drop cap - bold, large, no italics */
  .about :global(p:first-of-type)::first-letter {
    float: left;
    font-size: 3.75em;
    line-height: 0.75;
    margin: 0.1em 0.15em 0 0;
    font-weight: 700; /* Bold */
    font-style: normal; /* No italics */
    color: var(--text-primary);
    display: inline-block;
    transform-origin: left bottom;
    animation: dropcap-settle 0.9s ease-out both;
    animation-delay: 120ms;
  }

  /* Ensure proper text flow around drop cap */
  .about :global(p:first-of-type) {
    margin-top: 0;
  }

  @keyframes dropcap-settle {
    0% {
      transform: translateY(-4px);
    }
    65% {
      transform: translateY(2px);
    }
    100% {
      transform: translateY(0);
    }
  }

  @media (prefers-reduced-motion: reduce) {
    .about :global(p:first-of-type)::first-letter {
      animation: none;
    }
  }

</style>
